<section class='login-section'>
  <div>
    <h1>Login</h1>
  </div>
  <div>
    <div class='form-input'>
      <label for='email'>Correo:</label>
      <input type='email' id='email' name='email' required />
    </div>
    <div class='form-input'>
      <label for='password'>Contraseña:</label>
      <input type='password' id='password' name='password' required />
    </div>
    <button type='submit' onclick='login()'>Ingresar</button>
  </div>
  <div id='error-message' style='color: red;'></div>
  <div>
    <a href='/recoveryPassword'>Olvide mi Contraseña</a>
  </div>
  <div>
    <a href='/register'>No tienes cuenta? . Registrate aquí</a>
  </div>
  <div>
    <a href='/api/sessions/github'>
      <button type='submit'>
        Entrar con Github
      </button>
    </a>
  </div>
</section>

<style>
  .login-section {
    display: grid;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 10rem;
    padding: 1rem;
  }

  .login-section div,
  .login-section form {
    max-width: 50rem
  }

  .form-input {
    display: grid;
    margin-bottom: 1rem;
  }
</style>

<script>
  function login() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    fetch('/api/sessions/login', {
      method: 'POST',
      headers: {
        'Content-Type':
          'application/json'
      },
      body: JSON.stringify({ email, password })
    })
      .then((response) => {
        if (response.ok) {
          window.location.href = '/profile';
        }
        else {
          throw new Error('Ocurrio un error al iniciar sesión');
        }
      })
      .catch((error) => {
        document.getElementById('error-message').textContent = error.message;
      });
  }
</script>